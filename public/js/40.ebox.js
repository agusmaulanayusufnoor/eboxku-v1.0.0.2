(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"/bpq":function(t,a,e){"use strict";e.r(a);var n={data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),editmode:!1,dialog:!1,dialogDelete:!1,search:"",snack:!1,multiLine:!0,snackColor:"",snackText:"",max25chars:function(t){return t.length<=25||"Input too long!"},satuan:[],editedIndex:-1,editedItem:{id:"",namasatuan:"",namasatuanEdit:"",satuanRules:[function(t){return!!t||"Nama satuan belum diisi"}]},valid:!0,kantor_id:"",form:new Form({id:"",namasatuan:""})}},computed:{headers:function(){var t=[{text:"No",value:"index",align:"center",sortable:!1},{text:"Satuan",value:"namasatuan"}];return this.$gate.isAdmin()&&t.push({text:"Hapus",value:"actions",sortable:!1}),t},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},created:function(){this.$Progress.start(),this.initialize(),this.$Progress.finish()},methods:{save:function(){this.snack=!0,this.snackColor="success",this.snackText="Data disimpan",this.updateUser()},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Dibatalkan"},open:function(t){this.snack=!0,this.snackColor="info",this.snackText="Enter = Simpan",this.editedItem.id=t.id,this.editedItem.namasatuan=t.namasatuan},close:function(){console.log("Dialog closed")},pencetKeyboard:function(t){var a=(t=t||window.event).which?t.which:t.keyCode;if(191!==a&&220!==a)return!0;t.preventDefault()},initialize:function(){var t=this;this.$Progress.start(),this.$gate.isAdmin()&&axios.get("api/satuan").then((function(a){t.satuan=a.data.data})),this.$Progress.finish()},editSatuan:function(t){this.editedIndex=this.satuan.indexOf(t),this.item.id=t.id,this.item.namasatuan=t.namasatuan,console.log(this.item.id)},newModal:function(){this.editmode=!1,$("#addNew").modal("show"),this.$refs.form.reset(),this.editedItem.namasatuan=""},createUser:function(){var t=this;this.$refs.form.validate(),this.$Progress.start();var a=new FormData;a.set("namasatuan",this.editedItem.namasatuan),axios.post("api/satuan",a,{headers:{"content-type":"multipart/form-data"}}).then((function(a){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),t.$Progress.finish(),t.initialize()})).catch((function(t){Toast.fire({icon:"error",title:"Gagal tambah satuan, ulangi!"})}))},updateUser:function(){var t=this;this.$Progress.start();var a=new FormData;a.set("namasatuan",this.editedItem.namasatuan),a.append("_method","PUT"),axios.post("api/satuan/"+this.editedItem.id,a).then((function(a){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),t.$Progress.finish(),t.initialize()})).catch((function(){t.$Progress.fail()}))},deleteUser:function(t){var a=this;Swal.fire({title:"Yakin dihapus?",text:"Jika dihapus data hilang!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!"}).then((function(e){e.value&&a.form.delete("api/satuan/"+t).then((function(){Swal.fire("Dihapus!","Data telah dihapus.","success"),a.initialize()})).catch((function(t){Swal.fire("Failed!",t.message,"warning")}))}))}}},s=e("KHd+"),i=Object(s.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"justify-content-md-center",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"6"}},[t.$gate.isAdmin()?e("v-card",{staticClass:"pa-2 mx-auto"},[e("v-toolbar",{attrs:{color:"green lighten-1",dark:"",shaped:""}},[e("v-toolbar-title",[t._v("\n                    Master Satuan\n                ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{small:"",color:"indigo",dark:""},on:{click:t.newModal}},[e("v-icon",[t._v("mdi-plus-box")]),t._v(" Tambah\n                  ")],1)],1),t._v(" "),e("div",{staticClass:"card-body table-responsive p-0"},[e("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.satuan,search:t.search,justify:"center",dense:""},scopedSlots:t._u([{key:"item.index",fn:function(a){var e=a.index;return[t._v("\n                    "+t._s(e+1)+"\n                ")]}},{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:""}},[e("v-spacer"),t._v(" "),e("v-spacer"),t._v(" "),e("v-spacer"),t._v(" "),e("v-spacer"),t._v(" "),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari Satuan","single-line":"","hide-details":"",loading:"grey"},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(a){var n=a.item;return[e("v-icon",{staticClass:"mr-4",attrs:{small:"",color:"red",right:""},on:{click:function(a){return t.deleteUser(n.id)}}},[t._v("\n                    mdi-delete\n                ")])]}},{key:"item.namasatuan",fn:function(a){var n=a.item;return[e("v-edit-dialog",{on:{save:t.save,cancel:t.cancel,open:function(a){return t.open(n)},close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[e("div",{staticClass:"mt-4 text-h6"},[t._v("\n                            Edit Satuan\n                            ")]),t._v(" "),e("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:t.editedItem.namasatuan,callback:function(a){t.$set(t.editedItem,"namasatuan",a)},expression:"editedItem.namasatuan"}})]},proxy:!0}],null,!0)},[t._v("\n                        "+t._s(n.namasatuan)+"\n                        ")])]}}],null,!1,4163475818)})],1)],1):t._e()],1),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("v-snackbar",{staticStyle:{},attrs:{timeout:4e3,color:t.snackColor,"multi-line":t.multiLine,"position:":"",absolute:"",right:""},scopedSlots:t._u([{key:"action",fn:function(a){var n=a.attrs;return[e("v-btn",t._b({attrs:{text:""},on:{click:function(a){t.snack=!1}}},"v-btn",n,!1),[t._v("\n                    Close\n                    ")])]}}]),model:{value:t.snack,callback:function(a){t.snack=a},expression:"snack"}},[t._v("\n                "+t._s(t.snackText)+"\n\n                ")])],1)],1),t._v(" "),t.$gate.isAdmin()?t._e():e("div",[e("not-found")],1),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"addNew",tabindex:"-1",role:"dialog","aria-labelledby":"addNew","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"modal-title"},[t._v("Tambah Satuan")]),t._v(" "),e("h5",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"modal-title"},[t._v("Edit Data User")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(a){return a.preventDefault(),t.createUser.apply(null,arguments)}},model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[e("div",{staticClass:"modal-body"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.csrf,expression:"csrf"}],attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf},on:{input:function(a){a.target.composing||(t.csrf=a.target.value)}}}),t._v(" "),e("div",{staticClass:"form-group input-group"},[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{rules:t.editedItem.satuanRules,label:"Satuan",name:"namasatuan",placeholder:"Satuan",outlined:"",required:"",dense:"","prepend-icon":"mdi-ruler-square-compass"},model:{value:t.editedItem.namasatuan,callback:function(a){t.$set(t.editedItem,"namasatuan",a)},expression:"editedItem.namasatuan"}})],1)],1)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("v-btn",{attrs:{color:"error",elevation:"2",type:"button","data-dismiss":"modal"}},[e("v-icon",[t._v("mdi-cancel")]),t._v("\n                            Batal\n                        ")],1),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],attrs:{color:"success",elevation:"2",type:"submit"}},[e("v-icon",[t._v("mdi-pencil")]),t._v("\n                            Ubah\n                        ")],1),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],attrs:{color:"primary",elevation:"2",type:"submit"}},[e("v-icon",[t._v("mdi-plus-box")]),t._v("\n                            Tambah\n                        ")],1)],1)])],1)])])],1)],1)}),[],!1,null,null,null);a.default=i.exports}}]);
//# sourceMappingURL=40.ebox.js.map