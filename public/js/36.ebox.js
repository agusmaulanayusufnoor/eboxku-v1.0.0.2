(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{g4aS:function(a,t,e){"use strict";e.r(t);var i={data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),editmode:!1,dialog:!1,dialogDelete:!1,search:"",snack:!1,multiLine:!0,snackColor:"",snackText:"",max100chars:function(a){return a.length<=100||"Input too long!"},jabatan:[],editedIndex:-1,editedItem:{id:"",jabatan_pegawai:"",jabatan_pegawaiEdit:"",jabatanRules:[function(a){return!!a||"Nama jabatan belum diisi"}]},valid:!0,kantor_id:"",form:new Form({id:"",jabatan_pegawai:""})}},computed:{headers:function(){var a=[{text:"No",value:"index",align:"center",sortable:!1},{text:"jabatan",value:"jabatan_pegawai"}];return this.$gate.isAdmin()&&a.push({text:"Hapus",value:"actions",sortable:!1}),a},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},created:function(){this.$Progress.start(),this.initialize(),this.$Progress.finish()},methods:{save:function(){this.snack=!0,this.snackColor="success",this.snackText="Data disimpan",this.updateUser()},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Dibatalkan"},open:function(a){this.snack=!0,this.snackColor="info",this.snackText="Enter = Simpan",this.editedItem.id=a.id,this.editedItem.jabatan_pegawai=a.jabatan_pegawai},close:function(){console.log("Dialog closed")},pencetKeyboard:function(a){var t=(a=a||window.event).which?a.which:a.keyCode;if(191!==t&&220!==t)return!0;a.preventDefault()},initialize:function(){var a=this;this.$Progress.start(),this.$gate.isAdmin()&&axios.get("api/jabatan").then((function(t){a.jabatan=t.data.data})),this.$Progress.finish()},editjabatan:function(a){this.editedIndex=this.jabatan.indexOf(a),this.item.id=a.id,this.item.jabatan_pegawai=a.jabatan_pegawai,console.log(this.item.id)},newModal:function(){this.editmode=!1,$("#addNew").modal("show"),this.$refs.form.reset(),this.editedItem.jabatan_pegawai=""},createUser:function(){var a=this;this.$refs.form.validate(),this.$Progress.start();var t=new FormData;t.set("jabatan_pegawai",this.editedItem.jabatan_pegawai),axios.post("api/jabatan",t,{headers:{"content-type":"multipart/form-data"}}).then((function(t){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:t.data.message}),a.$Progress.finish(),a.initialize()})).catch((function(a){Toast.fire({icon:"error",title:"Gagal tambah jabatan, ulangi!"})}))},updateUser:function(){var a=this;this.$Progress.start();var t=new FormData;t.set("jabatan_pegawai",this.editedItem.jabatan_pegawai),t.append("_method","PUT"),axios.post("api/jabatan/"+this.editedItem.id,t).then((function(t){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:t.data.message}),a.$Progress.finish(),a.initialize()})).catch((function(){a.$Progress.fail()}))},deleteUser:function(a){var t=this;Swal.fire({title:"Yakin dihapus?",text:"Jika dihapus data hilang!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!"}).then((function(e){e.value&&t.form.delete("api/jabatan/"+a).then((function(){Swal.fire("Dihapus!","Data telah dihapus.","success"),t.initialize()})).catch((function(a){Swal.fire("Failed!",a.message,"warning")}))}))}}},n=e("KHd+"),s=Object(n.a)(i,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"justify-content-md-center",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"7"}},[a.$gate.isAdmin()?e("v-card",{staticClass:"pa-2 mx-auto"},[e("v-toolbar",{attrs:{color:"green lighten-1",dark:"",shaped:""}},[e("v-toolbar-title",[a._v("\r\n                    Master Jabatan\r\n                ")]),a._v(" "),e("v-spacer"),a._v(" "),e("v-btn",{attrs:{small:"",color:"indigo",dark:""},on:{click:a.newModal}},[e("v-icon",[a._v("mdi-plus-box")]),a._v(" Tambah\r\n                  ")],1)],1),a._v(" "),e("div",{staticClass:"card-body table-responsive p-0"},[e("v-data-table",{staticClass:"elevation-3",attrs:{headers:a.headers,items:a.jabatan,search:a.search,justify:"center",dense:""},scopedSlots:a._u([{key:"item.index",fn:function(t){var e=t.index;return[a._v("\r\n                    "+a._s(e+1)+"\r\n                ")]}},{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:""}},[e("v-spacer"),a._v(" "),e("v-spacer"),a._v(" "),e("v-spacer"),a._v(" "),e("v-spacer"),a._v(" "),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari Jabatan","single-line":"","hide-details":"",loading:"grey"},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[e("v-icon",{staticClass:"mr-4",attrs:{small:"",color:"red",right:""},on:{click:function(t){return a.deleteUser(i.id)}}},[a._v("\r\n                    mdi-delete\r\n                ")])]}},{key:"item.jabatan_pegawai",fn:function(t){var i=t.item;return[e("v-edit-dialog",{on:{save:a.save,cancel:a.cancel,open:function(t){return a.open(i)},close:a.close},scopedSlots:a._u([{key:"input",fn:function(){return[e("div",{staticClass:"mt-4 text-h6"},[a._v("\r\n                            Edit Jabatan\r\n                            ")]),a._v(" "),e("v-text-field",{attrs:{rules:[a.max100chars],label:"Edit","single-line":"",counter:""},model:{value:a.editedItem.jabatan_pegawai,callback:function(t){a.$set(a.editedItem,"jabatan_pegawai",t)},expression:"editedItem.jabatan_pegawai"}})]},proxy:!0}],null,!0)},[a._v("\r\n                        "+a._s(i.jabatan_pegawai)+"\r\n                        ")])]}}],null,!1,1662429123)})],1)],1):a._e()],1),a._v(" "),e("v-col",{attrs:{cols:"4"}},[e("v-snackbar",{staticStyle:{},attrs:{timeout:4e3,color:a.snackColor,"multi-line":a.multiLine,"position:":"",absolute:"",right:""},scopedSlots:a._u([{key:"action",fn:function(t){var i=t.attrs;return[e("v-btn",a._b({attrs:{text:""},on:{click:function(t){a.snack=!1}}},"v-btn",i,!1),[a._v("\r\n                    Close\r\n                    ")])]}}]),model:{value:a.snack,callback:function(t){a.snack=t},expression:"snack"}},[a._v("\r\n                "+a._s(a.snackText)+"\r\n\r\n                ")])],1)],1),a._v(" "),a.$gate.isAdmin()?a._e():e("div",[e("not-found")],1),a._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"addNew",tabindex:"-1",role:"dialog","aria-labelledby":"addNew","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{directives:[{name:"show",rawName:"v-show",value:!a.editmode,expression:"!editmode"}],staticClass:"modal-title"},[a._v("Tambah Jabatan")]),a._v(" "),e("h5",{directives:[{name:"show",rawName:"v-show",value:a.editmode,expression:"editmode"}],staticClass:"modal-title"},[a._v("Edit Data User")]),a._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[a._v("Ã—")])])]),a._v(" "),e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),a.createUser.apply(null,arguments)}},model:{value:a.valid,callback:function(t){a.valid=t},expression:"valid"}},[e("div",{staticClass:"modal-body"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.csrf,expression:"csrf"}],attrs:{type:"hidden",name:"_token"},domProps:{value:a.csrf},on:{input:function(t){t.target.composing||(a.csrf=t.target.value)}}}),a._v(" "),e("div",{staticClass:"form-group input-group"},[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{rules:a.editedItem.jabatanRules,label:"Jabatan Pegawai",name:"jabatan_pegawai",placeholder:"input",outlined:"",required:"",dense:"","prepend-icon":"mdi-account-plus"},model:{value:a.editedItem.jabatan_pegawai,callback:function(t){a.$set(a.editedItem,"jabatan_pegawai",t)},expression:"editedItem.jabatan_pegawai"}})],1)],1)]),a._v(" "),e("div",{staticClass:"modal-footer"},[e("v-btn",{attrs:{color:"error",elevation:"2",type:"button","data-dismiss":"modal"}},[e("v-icon",[a._v("mdi-cancel")]),a._v("\r\n                            Batal\r\n                        ")],1),a._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:a.editmode,expression:"editmode"}],attrs:{color:"success",elevation:"2",type:"submit"}},[e("v-icon",[a._v("mdi-pencil")]),a._v("\r\n                            Ubah\r\n                        ")],1),a._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!a.editmode,expression:"!editmode"}],attrs:{color:"primary",elevation:"2",type:"submit"}},[e("v-icon",[a._v("mdi-plus-box")]),a._v("\r\n                            Tambah\r\n                        ")],1)],1)])],1)])])],1)],1)}),[],!1,null,null,null);t.default=s.exports}}]);
//# sourceMappingURL=36.ebox.js.map