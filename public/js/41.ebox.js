(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{Y07w:function(t,e,a){"use strict";a.r(e);var s={data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),editmode:!1,dialog:!1,dialogDelete:!1,search:"",snack:!1,multiLine:!0,snackColor:"",snackText:"",max100chars:function(t){return t.length<=100||"Input too long!"},statuspegawai:[],editedIndex:-1,editedItem:{id:"",statuspegawai:"",statuspegawaiEdit:"",statuspegawaiRules:[function(t){return!!t||"Nama statuspegawai belum diisi"}]},valid:!0,kantor_id:"",form:new Form({id:"",statuspegawai:""})}},computed:{headers:function(){var t=[{text:"No",value:"index",align:"center",sortable:!1},{text:"statuspegawai",value:"statuspegawai"}];return this.$gate.isAdmin()&&t.push({text:"Hapus",value:"actions",sortable:!1}),t},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},created:function(){this.$Progress.start(),this.initialize(),this.$Progress.finish()},methods:{save:function(){this.snack=!0,this.snackColor="success",this.snackText="Data disimpan",this.updateUser()},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Dibatalkan"},open:function(t){this.snack=!0,this.snackColor="info",this.snackText="Enter = Simpan",this.editedItem.id=t.id,this.editedItem.statuspegawai=t.statuspegawai},close:function(){console.log("Dialog closed")},pencetKeyboard:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(191!==e&&220!==e)return!0;t.preventDefault()},initialize:function(){var t=this;this.$Progress.start(),this.$gate.isAdmin()&&axios.get("api/statuspegawai").then((function(e){t.statuspegawai=e.data.data})),this.$Progress.finish()},editstatuspegawai:function(t){this.editedIndex=this.statuspegawai.indexOf(t),this.item.id=t.id,this.item.statuspegawai=t.statuspegawai,console.log(this.item.id)},newModal:function(){this.editmode=!1,$("#addNew").modal("show"),this.$refs.form.reset(),this.editedItem.statuspegawai=""},createUser:function(){var t=this;this.$refs.form.validate(),this.$Progress.start();var e=new FormData;e.set("statuspegawai",this.editedItem.statuspegawai),axios.post("api/statuspegawai",e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:e.data.message}),t.$Progress.finish(),t.initialize()})).catch((function(t){Toast.fire({icon:"error",title:"Gagal tambah status pegawai, ulangi!"})}))},updateUser:function(){var t=this;this.$Progress.start();var e=new FormData;e.set("statuspegawai",this.editedItem.statuspegawai),e.append("_method","PUT"),axios.post("api/statuspegawai/"+this.editedItem.id,e).then((function(e){$("#addNew").modal("hide"),Toast.fire({icon:"success",title:e.data.message}),t.$Progress.finish(),t.initialize()})).catch((function(){t.$Progress.fail()}))},deleteUser:function(t){var e=this;Swal.fire({title:"Yakin dihapus?",text:"Jika dihapus data hilang!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!"}).then((function(a){a.value&&e.form.delete("api/statuspegawai/"+t).then((function(){Swal.fire("Dihapus!","Data telah dihapus.","success"),e.initialize()})).catch((function(t){Swal.fire("Failed!",t.message,"warning")}))}))}}},i=a("KHd+"),n=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"justify-content-md-center",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"7"}},[t.$gate.isAdmin()?a("v-card",{staticClass:"pa-2 mx-auto"},[a("v-toolbar",{attrs:{color:"green lighten-1",dark:"",shaped:""}},[a("v-toolbar-title",[t._v("\n                    Master Status Pegawai\n                ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{small:"",color:"indigo",dark:""},on:{click:t.newModal}},[a("v-icon",[t._v("mdi-plus-box")]),t._v(" Tambah\n                  ")],1)],1),t._v(" "),a("div",{staticClass:"card-body table-responsive p-0"},[a("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.statuspegawai,search:t.search,justify:"center",dense:""},scopedSlots:t._u([{key:"item.index",fn:function(e){var a=e.index;return[t._v("\n                    "+t._s(a+1)+"\n                ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),t._v(" "),a("v-spacer"),t._v(" "),a("v-spacer"),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari Status Pegawai","single-line":"","hide-details":"",loading:"grey"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-4",attrs:{small:"",color:"red",right:""},on:{click:function(e){return t.deleteUser(s.id)}}},[t._v("\n                    mdi-delete\n                ")])]}},{key:"item.statuspegawai",fn:function(e){var s=e.item;return[a("v-edit-dialog",{on:{save:t.save,cancel:t.cancel,open:function(e){return t.open(s)},close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("div",{staticClass:"mt-4 text-h6"},[t._v("\n                            Edit Status Pegawai\n                            ")]),t._v(" "),a("v-text-field",{attrs:{rules:[t.max100chars],label:"Edit","single-line":"",counter:""},model:{value:t.editedItem.statuspegawai,callback:function(e){t.$set(t.editedItem,"statuspegawai",e)},expression:"editedItem.statuspegawai"}})]},proxy:!0}],null,!0)},[t._v("\n                        "+t._s(s.statuspegawai)+"\n                        ")])]}}],null,!1,3363190331)})],1)],1):t._e()],1),t._v(" "),a("v-col",{attrs:{cols:"4"}},[a("v-snackbar",{staticStyle:{},attrs:{timeout:4e3,color:t.snackColor,"multi-line":t.multiLine,"position:":"",absolute:"",right:""},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snack=!1}}},"v-btn",s,!1),[t._v("\n                    Close\n                    ")])]}}]),model:{value:t.snack,callback:function(e){t.snack=e},expression:"snack"}},[t._v("\n                "+t._s(t.snackText)+"\n\n                ")])],1)],1),t._v(" "),t.$gate.isAdmin()?t._e():a("div",[a("not-found")],1),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"addNew",tabindex:"-1",role:"dialog","aria-labelledby":"addNew","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"modal-title"},[t._v("Tambah Status Pegawai")]),t._v(" "),a("h5",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"modal-title"},[t._v("Edit Data User")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.createUser.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.csrf,expression:"csrf"}],attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf},on:{input:function(e){e.target.composing||(t.csrf=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-group input-group"},[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{rules:t.editedItem.statuspegawaiRules,label:"Status Pegawai",name:"statuspegawai",placeholder:"input",outlined:"",required:"",dense:"","prepend-icon":"mdi-account-plus"},model:{value:t.editedItem.statuspegawai,callback:function(e){t.$set(t.editedItem,"statuspegawai",e)},expression:"editedItem.statuspegawai"}})],1)],1)]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("v-btn",{attrs:{color:"error",elevation:"2",type:"button","data-dismiss":"modal"}},[a("v-icon",[t._v("mdi-cancel")]),t._v("\n                            Batal\n                        ")],1),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],attrs:{color:"success",elevation:"2",type:"submit"}},[a("v-icon",[t._v("mdi-pencil")]),t._v("\n                            Ubah\n                        ")],1),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],attrs:{color:"primary",elevation:"2",type:"submit"}},[a("v-icon",[t._v("mdi-plus-box")]),t._v("\n                            Tambah\n                        ")],1)],1)])],1)])])],1)],1)}),[],!1,null,null,null);e.default=n.exports}}]);
//# sourceMappingURL=41.ebox.js.map